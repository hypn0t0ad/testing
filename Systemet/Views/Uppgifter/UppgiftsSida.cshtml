@model Systemet.Models.ViewModels.GruppViewModel

@{
    ViewBag.Title = "UppgiftsSida";
}
<ol class="breadcrumb">
    <li><a href="~/Views/Konto/inloggad.cshtml">Start</a></li>
    <li><a href="~/Views/Grupp/minagrupper.cshtml">Mina Grupper</a></li>
    <li><a href="~/Views/Grupp/gruppsida.cshtml">Gruppsida</a></li>
    <li class="active">Uppgift: @Model.uppgift.Namn</li>
</ol>

<h2>UppgiftsSida</h2>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>


<dt>
    @Html.DisplayNameFor(model => Model.uppgift.Namn)
</dt>

<dd>
    @Html.DisplayFor(model => Model.uppgift.Namn)
</dd>

<dt>
    @Html.DisplayNameFor(model => Model.uppgift.Beskrivning)
</dt>

<dd>
    @Html.DisplayFor(model => Model.uppgift.Beskrivning)
</dd>

    @using (Html.BeginForm("läggtillanvändaretilluppgift", "Uppgifter", FormMethod.Post))
    {
        if (Model.uppgift.Ansvarig == null)
        {

        <dt>
            @Html.DisplayNameFor(model => Model.uppgift.Ansvarig)
        </dt>
        <dd>
            <p>Ingen har tagit på sig den här uppgiften än</p>
        </dd>

        if (Convert.ToInt32(Session["AnvändarID"]) == Model.uppgift.TillhörGrupp.LedareID)
        {
            <dt>
            </dt>
            <dd>
                @Html.HiddenFor(model => model.grupp.GruppID)
                @Html.HiddenFor(model => model.uppgift.UppgifterID)
                <div class="form-group">
                    @Html.DropDownListFor(m => m.användareID, Model.lemmar, "Välj", new { @class = "form-control", @id = "vald", @value = "AnvändarID", })
                </div>
            </dd>
        }
        else
        {
            <dt>
                @Html.Display("vill du ta det här?")
            </dt>
            <dd>
                @Html.RadioButtonFor(m => m.inloggad, "Ja", new { @class = "form-control", @id = "vald", @value = "AnvändarID", }))
            </dd>
        }
    }
    else
    {
            <div>
                @{Html.RenderPartial("uppgiftssidapartial");}
            </div>
           
        }
    <dt>
        <input type="submit" id="Submitknappen" value="Lägg till" />
</dt>
}

<dd>
    @Html.ActionLink("Edit", "Edit", new { id = Model.uppgift.UppgifterID }) |
    @Html.ActionLink("Delete", "Delete", new { id = Model.uppgift.UppgifterID })
</dd>



@section Scripts {

    <script type="text/javascript">

        function hideOnLoad() {
            $('#Submitknappen').hide();
        }

        $(document).ready(function () {
            hideOnLoad();

            $('#vald').change(function () {
                var AnvändarID = $(this).val();

                if (AnvändarID >= '1') {
                    $('#Submitknappen').show();
                }
                else {
                    hideOnLoad();
                }
            });
        });
</script>
}